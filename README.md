
# Apache Nifi

## What is Apache Nifi
```xml 
Apache NiFi is an open-source, visual data integration platform that automates 
the flow of data between systems, allowing users to design, control, and 
monitor data pipelines through a user-friendly, web-based interface, 
supporting batch and real-time scenarios with features like data provenance, 
security, and scalability. Originally developed by the NSA, it provides a flow-based 
programming model to move, transform, and route data efficiently, acting as a 
powerful tool for data engineering and pipeline automation. 

Key Terms:
Data flow: Moving data from source to destination. Data can be of any format 
like csv, json, xml, http data, image, videoes, telemetry etc
Data Pipeline: Movement and transformation of data content from source to destination 
ETL: Extract, Transform, Load


Key Features
Web UI: A visual interface to build data flows by connecting processors (components).
Data Provenance: Tracks every piece of data (FlowFile) from its origin to its destination, 
showing lineage and history.
Data Flow Automation: Automates data movement, ingestion, enrichment, and transformation 
between diverse sources and destinations.
Flow-Based Programming: Uses a visual, diagrammatic approach to define data pipelines.
Guaranteed Delivery: Configurable to be loss-tolerant or guarantee delivery, with priority queuing.
Extensible: Allows developers to create custom processors and services.
Secure & Scalable: Supports multi-tenant security and clustering for large-scale deployments. 

How it Works (Core Concepts)
FlowFile: The fundamental unit of data in NiFi, containing the actual data (content) 
and metadata (attributes).
Processor: Individual components that perform specific tasks (e.g., fetching data, 
transforming, routing).
Connection: The path data flows along between processors, often with backpressure to 
manage data flow rates.
FlowFile Repository, Content Repository, Provenance Repository: Key components for 
managing FlowFile state, content, and history. 

Use Cases
Collecting data from logs, sensors, and applications.
Real-time data streaming and processing.
Data integration for Big Data systems (e.g., Kafka, Hadoop).
Cybersecurity, observability, and generative AI data pipelines. 

Why choose a framework? (4Vs)
Volume, Velocity, Variety, Veracity (messiness and trustworthiness)

```
![alt text](https://github.com/balaji1974/apache-nifi/blob/main/Nifi-Core.png)

## Installing Nifi on Mac
```xml 
1. Download Nifi
https://nifi.apache.org/download/
Download the binary version
and unzip and move to your the folder of your choice

2. Start Nifi
Go the folder Nifi base folder and run the command
./bin/nifi.sh start
tail -f ./logs/nifi-app.log

3. Set Password
The default user name and password can be viewed on the log file
at /logs/nifi-app.log
Search for the lines Generated Username
In my case I have this:
Generated Username [***username***]
Generated Password [***password***]
* this is generated only once during first run 
and must be changed. 

You can change the password by using the below comm
./bin/nifi.sh set-single-user-credentials USERNAME PASSWORD

Stop Nifi
./bin/nifi.sh stop

and Start it back 
./bin/nifi.sh start


4. Go to Nifi console
https://localhost:8080/nifi
Login using the user id and password

5. Stop Nifi
./bin/nifi.sh stop

```

## First Nifi Process - Copy Files
```xml 
1. Drag a Processer
2. Search for getFile
3. Click on the properties -> Input directory 
4. Enter a source folder path 

5. Drag another Processer
6. Search for putFile
7. Click on the properties -> Directory 
8. Enter a destination folder path 
9. Relationship Tab
10. Failure -> Terminate
11. Success -> Terminate

12. Pull the arrow (connection) from Input Processor to 
Output Processor
13. Start both processes by righ click + start

14. Put any file on the source folder and its 
immediately copied to the destination folder

Import template named GetAndPut.xml into your project 
and drag it to your canvas to see it working

```

## Core Nifi Terminologies
```xml 
What is Nifi? 
Nifi consist of automic elements which can be combibed to groups
to build a data flow
Nifi consiste of Processor and Processor groups

What is a Processor? 
Processors are automic elements that can do simple tasks
Each processor in Nifi is unique in its own way 
We have many data source and data sink processors

What is a flow file?
Its the actual data, that is generated by the processor from any data source.
Flowfiles are persisted on the disk and passed by reference. New flowfile will 
be created only if its content is modified but not when its attributes are changed. 

What is a connection?
Processor can be connected to each other via connections. 
Each connection is a queue of flowfile. 

What is a process group? 
Set of processors are combined together to form a process group
Input / Output ports are used to move data between process groups

What is a controller service?
A shared service that can be used by a processor (eg DB connections)

What is relationship? 
Relationships are named to indicate the processing of the Flowfile
Each processor has zero or more relationships defined for it
Once the processor has finished processing a flowfile it will 
transfer the flowfile to one of the relationships


```

## Nifi Processor Types
```xml 
Data injestion processor
Data transformation processor 
Data egress (exiting) processor
Data routing and mediation processor
Database access processor
Attribute extraction processor
System intraction processor
Splitting and aggregation processor
Http and UDP processor 
Amazon webservice processor

```

## Nifi Processor Configuration, Connection & Relationship
```xml 
Nifi follows the philisophy of configuration over coding
All processors have a set of standard configurations and 
unique configurations

Stardard configurations are mostly under settings and scheduling tab.


```

## Processors List
```xml 
Example 
Generate flowfile is used to generate random data or custom data
Log Attribute processors logs the attributes of the flow file

General list of all processors and their details can be found in:
https://nifi.apache.org/components/

When chaining processors backpressure is an important attribute to 
monitor and fine tune


```


### Reference
```xml
https://www.youtube.com/playlist?list=PL55symSEWBbMBSnNW_Aboh2TpYkNIFMgb
http://www.dvstechnologies.in/apache-nifi/
https://nifi.apache.org/
```
